(window["webpackJsonpcra-tasks"]=window["webpackJsonpcra-tasks"]||[]).push([[0],{108:function(e,t,a){e.exports=a(233)},113:function(e,t,a){},134:function(e,t){},136:function(e,t){},176:function(e,t){},177:function(e,t){},233:function(e,t,a){"use strict";a.r(t);var n=a(2),o=a.n(n),r=a(107),c=a.n(r),s=(a(113),a(16)),l=a(17),i=a(19),u=a(18),m=a(20),p=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={hasError:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log("Wyst\u0105pi\u0142 nast\u0119puj\u0105cy b\u0142\u0105d:",e,t)}},{key:"render",value:function(){var e=this.props,t=e.message,a=e.children;return this.state.hasError?t:a}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(o.a.Component),d=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault(),a.props.onLoginAttempt({email:a.emailInput.current.value,password:a.passwordInput.current.value}),a.emailInput.current.value="",a.passwordInput.current.value=""},a.emailInput=o.a.createRef(),a.passwordInput=o.a.createRef(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"jumbotron bg-dark text-white"},o.a.createElement("form",{onSubmit:this.handleSubmit},this.props.errorMessage?o.a.createElement("div",{className:"alert alert-danger"},this.props.errorMessage):null,o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{htmlFor:"email",className:"col-form-label text-md-right col-md-2"},"Email:"),o.a.createElement("div",{className:"col-md-8"},o.a.createElement("input",{ref:this.emailInput,type:"text",defaultValue:"hubert@example.com",className:"form-control"}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{htmlFor:"password",className:"col-form-label text-md-right col-md-2"},"Has\u0142o:"),o.a.createElement("div",{className:"col-md-8"},o.a.createElement("input",{ref:this.passwordInput,type:"password",defaultValue:"secret",className:"form-control"}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("div",{className:"col-md-8 offset-md-2"},o.a.createElement("button",{className:"btn btn-block btn-outline-warning"},"Zaloguj si\u0119")))))}}]),t}(o.a.Component),h=a(51),f=a(50),g=a.n(f),v=a(53),b=a(54),k=a.n(b),w={login:function(){var e=Object(v.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("".concat("http://localhost:5000","/login"),t);case 2:return a=e.sent,n=a.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E=a(63),y=a.n(E),j=o.a.lazy((function(){return Promise.all([a.e(3),a.e(4)]).then(a.bind(null,253))})),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={accessToken:null,previousLoginAttemptFailed:!1,expiresIn:36e5},a.handleLoginAttempt=function(e){w.login(e).then((function(e){var t=e.accessToken;localStorage.setItem("accessToken",t),a.getAccessToken()})).catch((function(){a.setState({accessToken:null,previousLoginAttemptFailed:!0})}))},a.handleLogout=function(){a.setState({accessToken:localStorage.removeItem("accessToken"),previousLoginAttemptFailed:!1})},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"getUserExpires",value:function(e){return y.a.decode(e)}},{key:"getAccessToken",value:function(){this.setState({accessToken:localStorage.getItem("accessToken"),previousLoginAttemptFailed:!1})}},{key:"componentDidMount",value:function(){var e=this;this.getAccessToken(),this.intID=setInterval((function(){e.handleLogout()}),this.state.expiresIn)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intID)}},{key:"isUserLoggedIn",value:function(){return!!this.state.accessToken}},{key:"render",value:function(){return o.a.createElement("div",{className:"App"},o.a.createElement(p,{message:"Co\u015b nie dzia\u0142a w ca\u0142ej aplikacji"},this.isUserLoggedIn()?o.a.createElement(h.a.Provider,{value:{accessToken:this.state.accessToken}},o.a.createElement(o.a.Suspense,{fallback:"... Loading"},o.a.createElement(j,{onLogout:this.handleLogout}))):o.a.createElement(d,{errorMessage:this.state.previousLoginAttemptFailed?"Nie uda\u0142o si\u0119 zalogowa\u0107":null,onLoginAttempt:this.handleLoginAttempt})))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},51:function(e,t,a){"use strict";var n=a(2),o=a.n(n).a.createContext({accessToken:null});t.a=o}},[[108,1,2]]]);
//# sourceMappingURL=main.43cd318f.chunk.js.map