(window["webpackJsonpcra-tasks"]=window["webpackJsonpcra-tasks"]||[]).push([[4],{241:function(e,t,n){},253:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),c=n(235),o=n(251),u=(n(241),n(51)),s=n(240),l=function(e){var t={};return e.name?e.name.length<3&&(t.name="Must have min 3 characters"):t.name="Required",t},i=function(e){var t=e.addTask,n=(new Date).toISOString().slice(0,10),a=Object(s.a)({initialValues:{name:"",priority:"",date:n,done:!1,finishDate:null},validate:l,onSubmit:function(e,n){var a=n.resetForm;t(e),a()}});return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:a.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{id:"name",name:"name",type:"text",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.name,className:"form-control",placeholder:"add task"}),a.errors.name?r.a.createElement("div",{className:"alert alert-danger"},a.errors.name):null),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{id:"priority",name:"priority",type:"checkbox",onChange:a.handleChange,onBlur:a.handleBlur,value:a.values.priority,className:"form-check-input"}),r.a.createElement("label",{className:"form-check-label",htmlFor:"priority"},"priorytet")),r.a.createElement("button",{className:"btn btn-block btn-outline-warning",type:"submit"},"Submit")))};var m=function(e){var t=e.task,n=t.name,a=t.done,c=t.finishDate,o=t.priority,u=t.date,s=a,l={};return a&&(l.textDecoration="line-through",l.backgroundColor="orange"),o&&(l.color="red"),r.a.createElement("tr",{style:l},r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,n),r.a.createElement("td",null,u),r.a.createElement("td",null,c),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-primary",onClick:e.onDone,disabled:s},"finish")),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",onClick:e.onEdit,disabled:s},"edit")),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:e.onDelete},"delete")))};var d=function(e){return r.a.createElement("table",{className:"table table-info table-hover table-striped table-responsive{-sm|-md|-lg|-xl}"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"task name"),r.a.createElement("th",null,"add task"),r.a.createElement("th",null,"finish date"),r.a.createElement("th",null,"ok"),r.a.createElement("th",null,"edit"),r.a.createElement("th",null,"del"))),r.a.createElement("tbody",null,e.tasks.map((function(t,n){return r.a.createElement(m,{key:t.id,index:n,task:t,onDelete:function(){return e.delete(t)},onDone:function(){return e.done(t)},onEdit:function(){return e.edit(t)}})}))))};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var p=function(e){var t={};return e.name?e.name.length<3&&(t.name="Must have min 3 characters"):t.name="Required",t},h=function(e){var t=e.update,n=e.edit,a=e.task,o=a.name,u=Object(s.a)({initialValues:{name:o},validate:p,onSubmit:function(e){var n=e.name;t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{name:n}))}});return r.a.createElement("div",{className:"jumbotron bg-dark text-white"},r.a.createElement("form",{onSubmit:u.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{id:"name",name:"name",type:"text",onChange:u.handleChange,onBlur:u.handleBlur,value:u.values.name,className:"form-control"}),u.errors.name?r.a.createElement("div",{className:"alert alert-danger"},u.errors.name):null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-block btn-outline-warning",type:"submit"},"Submit")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-block btn-outline-danger",onClick:n},"cancel"))))},b=n(50),E=n.n(b),v=n(53),k=n(54),y=n.n(k),g="http://localhost:5000/tasks",O={getAllTasks:function(){var e=Object(v.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat(g),{headers:{Authorization:"Bearer ".concat(t)}});case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addTask:function(){var e=Object(v.a)(E.a.mark((function e(t,n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("".concat(g),t,{headers:{Authorization:"Bearer ".concat(n)}});case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),replaceTask:function(){var e=Object(v.a)(E.a.mark((function e(t,n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("task has to have an id to be updated");case 2:return e.next=4,y.a.put("".concat(g,"/").concat(t.id),t,{headers:{Authorization:"Bearer ".concat(n)}});case 4:return a=e.sent,e.next=7,a.data;case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),finishTask:function(){var e=Object(v.a)(E.a.mark((function e(t,n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("task has to have an id to be updated");case 2:return e.next=4,y.a.patch("".concat(g,"/").concat(t.id),{done:!0,finishDate:(new Date).toISOString().slice(0,10)},{headers:{Authorization:"Bearer ".concat(n)}});case 4:return a=e.sent,r=a.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),removeTask:function(){var e=Object(v.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("task has to have an id to be deleted");case 2:return e.next=4,y.a.delete("".concat(g,"/").concat(t.id),{headers:{Authorization:"Bearer ".concat(n)}});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getTasksByFullTextSearch:function(){var e=Object(v.a)(E.a.mark((function e(t,n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.get("".concat(g,"/?q=").concat(t),{headers:{Authorization:"Bearer ".concat(n)}});case 2:return a=e.sent,r=a.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},w=n(252);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var j={tasks:[],searchQuery:"",edit:!1,loading:!0,error:null},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_TASKS":var n=t.tasks;return S({},e,{tasks:n});case"ADD_TASK":var a=t.task,r=[].concat(Object(w.a)(e.tasks),[a]);return S({},e,{tasks:r});case"REPLACE_TASK":var c=t.replacedTask,o=e.tasks.map((function(e){return e.id===c.id?c:e}));return S({},e,{tasks:o,edit:!1});case"DELETE_TASK":var u=t.removedTask,s=e.tasks.filter((function(e){return e.id!==u.id}));return S({},e,{tasks:s});case"TASK_EDIT_START":var l={action:t};return S({},e,{task:l,edit:!e.edit});case"COMPLETE_TASK":var i=t.completedTask,m=e.tasks.map((function(e){return e.id===i.id&&(e.done=!e.done,e.finishDate=e.done?(new Date).toISOString().slice(0,10):null),e}));return S({},e,{tasks:m});case"SET_ERROR":var d=t.error;return S({},e,{error:d});case"LOADING":return S({},e,{loading:!1});case"SEARCH_INPUT":var f=t.payload;return S({},e,{searchQuery:f});case"SEARCH_TASK":var p=e.tasks.filter((function(t){return t.name.toLowerCase().includes(e.searchQuery)}));return S({},e,{tasks:p});default:return e}},D=function(e){return{type:"SET_TASKS",tasks:e}},x=function(e){return{type:"ADD_TASK",task:e}},N=function(e){return{type:"SET_ERROR",error:e}},P=function(e){return{type:"DELETE_TASK",removedTask:e}},C=function(){return{type:"LOADING"}},_=function(e){return{type:"REPLACE_TASK",replacedTask:e}},R=function(e){return{type:"SEARCH_INPUT",payload:e.target.value.toLowerCase()}},K=function(){return{type:"SEARCH_TASK"}};n(250);var B=function(e){var t=e.search;return r.a.createElement("div",{className:"form-group mt-4"},r.a.createElement("input",{type:"text",placeholder:"search task",className:"form-control",onInput:t}))};function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var I=function(){var e=Object(a.useReducer)(A,void 0,A),t=Object(o.a)(e,2),n=t[0],s=t[1],l=Object(a.useContext)(u.a).accessToken;Object(a.useEffect)((function(){O.getAllTasks(l).then((function(e){return s(D(e))})).catch((function(e){return s(N(e))})).finally((function(){return s(C())})),O.getTasksByFullTextSearch(n.searchQuery,l).then((function(){s(K())}))}),[l,n.searchQuery]);var m=function(e){s({type:"TASK_EDIT_START",task:e})},f=n.tasks,p=n.edit,b=n.error,E=n.loading;return r.a.createElement(r.a.Fragment,null,p?r.a.createElement(h,{task:n.task.action.task,update:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(n,!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.task,{},e);O.replaceTask(t,l).then((function(e){return s(_(e))}))},edit:m}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"jumbotron bg-dark text-white col-{-sm|-md|-lg|-xl}"},r.a.createElement(i,{addTask:function(e){try{O.addTask(e,l).then((function(e){return s(x(e))}))}catch(b){console.log("Jest b\u0142\u0105d przy tworzeniu taska:",b)}}}),r.a.createElement(B,{search:function(e){return s(R(e))}})),b?"Nie uda\u0142o si\u0119 za\u0142adowa\u0107 :(":null,E?"taski si\u0119 \u0142aduj\u0105...":null,r.a.createElement(d,{loading:E,tasks:f,delete:function(e){O.removeTask(e,l).then((function(){return s(P(e))}))},done:function(e){O.finishTask(e,l).then((function(){return s({type:"COMPLETE_TASK",completedTask:e})}))},edit:m})))};var F=function(e){var t=e.children;if(t.length<1)throw new Error("Header has to have at least one child!");return r.a.createElement("header",{className:"card bg-warning text-white"},t)},z=n(63),H=n.n(z);var Q=function(e){var t,n=e.onLogout,c=Object(a.useContext)(u.a).accessToken;return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"card-title"},"TASKS LIST"),r.a.createElement("p",{className:"card-text"},"Witaj ",(t=c,H.a.decode(t).email)," /",r.a.createElement("a",{href:"#",className:"",onClick:n},"wyloguj si\u0119")))):null)};t.default=function(e){var t=e.onLogout;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F,null,r.a.createElement(Q,{onLogout:t})),r.a.createElement(I,null))}}}]);
//# sourceMappingURL=4.2c3cfe0e.chunk.js.map