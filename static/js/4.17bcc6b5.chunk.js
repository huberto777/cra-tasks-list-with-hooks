(this["webpackJsonpcra-tasks"]=this["webpackJsonpcra-tasks"]||[]).push([[4],{262:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(243),l=a(259),i=a(250),s=function(e){var t={};return e.name?e.name.length<3&&(t.name="Must have min 3 characters"):t.name="Required",t},u=function(e){var t=e.addTask,a=(new Date).toISOString().slice(0,10),n=Object(i.a)({initialValues:{name:"",priority:"",date:a,done:!1,finishDate:null},validate:s,onSubmit:function(e,a){var n=a.resetForm;t(e),n()}});return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:n.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{id:"name",name:"name",type:"text",onChange:n.handleChange,onBlur:n.handleBlur,value:n.values.name,className:"form-control",placeholder:"add task"}),n.errors.name?r.a.createElement("div",{className:"alert alert-danger"},n.errors.name):null),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{id:"priority",name:"priority",type:"checkbox",onChange:n.handleChange,onBlur:n.handleBlur,value:n.values.priority,className:"form-check-input"}),r.a.createElement("label",{className:"form-check-label",htmlFor:"priority"},"priorytet")),r.a.createElement("button",{className:"btn btn-block btn-outline-warning",type:"submit"},"Dodaj")))};var o=function(e){var t=e.task,a=t.name,n=t.done,c=t.finishDate,l=t.priority,i=t.date,s=n,u={};return n&&(u.textDecoration="line-through",u.backgroundColor="orange"),l&&(u.color="red"),r.a.createElement("tr",{style:u},r.a.createElement("td",null,e.index+1),r.a.createElement("td",null,a),r.a.createElement("td",null,i),r.a.createElement("td",null,c),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-primary",onClick:e.onDone,disabled:s},"finish")),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-secondary",onClick:e.onEdit,disabled:s},"edit")),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:e.onDelete},"delete")))};var m=function(e){var t=e.tasks,a=e.del,n=e.done,c=e.edit;return r.a.createElement("table",{className:"table table-info table-hover table-striped table-responsive{-sm|-md|-lg|-xl}"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"task name"),r.a.createElement("th",null,"add task"),r.a.createElement("th",null,"finish date"),r.a.createElement("th",null,"ok"),r.a.createElement("th",null,"edit"),r.a.createElement("th",null,"del"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement(o,{key:e.id,index:t,task:e,onDelete:function(){return a(e)},onDone:function(){return n(e)},onEdit:function(){return c(e)}})}))))},d=function(e){var t={};return e.name?e.name.length<3&&(t.name="Must have min 3 characters"):t.name="Required",t},b=function(e){var t=e.update,a=e.edit,n=e.task,l=n.name,s=Object(i.a)({initialValues:{name:l},validate:d,onSubmit:function(e){var a=e.name;t(Object(c.a)(Object(c.a)({},n),{},{name:a}))}});return r.a.createElement("div",{className:"jumbotron bg-dark text-white"},r.a.createElement("form",{onSubmit:s.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{id:"name",name:"name",type:"text",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.name,className:"form-control"}),s.errors.name?r.a.createElement("div",{className:"alert alert-danger"},s.errors.name):null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-block btn-outline-warning",type:"submit"},"Edytuj")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-block btn-outline-danger",onClick:a},"cancel"))))},f=a(54),h=a.n(f),E=a(114),p=a(263),k=a(115),v=[{id:1,date:"2020-02-03",done:!1,finishDate:null,name:"nauczy\u0107 si\u0119 js es 6",priority:!1},{id:2,date:"2020-02-04",done:!1,finishDate:null,name:"nauczy\u0107 si\u0119 biblioteki axios",priority:!0},{id:3,date:"2020-03-03",done:!1,finishDate:null,name:"zainstalowa\u0107 linuxa",priority:!1},{id:4,date:"2020-04-09",done:!1,finishDate:null,name:"zrobi\u0107 api w laravelu",priority:!1}];function j(e){var t=v.findIndex((function(t){return t.id===e}));if(t<0)throw new Error("task o podanym id nie istnieje");return t}var O={getAllTasks:function(){return Object(E.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.a)(200);case 2:return e.abrupt("return",[].concat(v));case 3:case"end":return e.stop()}}),e)})))()},addTask:function(e){return Object(E.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.a)(200);case 2:return a=Object(c.a)({id:Object(p.a)()},e),v.push(a),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},replaceTask:function(e){return Object(E.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.a)(200);case 2:if(e.id){t.next=4;break}throw new Error("task has to have an id to be updated");case 4:return a=j(e.id),n=Object(c.a)({},e),v[a]=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))()},finishTask:function(e){return Object(E.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.a)(200);case 2:if(e.id){t.next=4;break}throw new Error("task has to have an id to be finished");case 4:return a=Object(c.a)(Object(c.a)({},e),{},{done:!0,finishDate:(new Date).toISOString().slice(0,10)}),n=j(e.id),v[n]=a,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))()},removeTask:function(e){return Object(E.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.a)(200);case 2:if(e.id){t.next=4;break}throw new Error("task has to have an id to be deleted");case 4:a=j(e.id),v.splice(a,1);case 6:case"end":return t.stop()}}),t)})))()},getTasksByFullTextSearch:function(e){return Object(E.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.a)(200);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})))()}},g=a(260),T={tasks:[],searchQuery:"",edit:!1,loading:!0,error:null},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_TASKS":var a=t.tasks;return Object(c.a)(Object(c.a)({},e),{},{tasks:a});case"SEARCH_TASK":var n=e.tasks.filter((function(t){return t.name.toLowerCase().includes(e.searchQuery)}));return Object(c.a)(Object(c.a)({},e),{},{tasks:n});case"ADD_TASK":var r=t.task,l=[].concat(Object(g.a)(e.tasks),[r]);return Object(c.a)(Object(c.a)({},e),{},{tasks:l});case"REPLACE_TASK":var i=t.replacedTask,s=e.tasks.map((function(e){return e.id===i.id?i:e}));return Object(c.a)(Object(c.a)({},e),{},{tasks:s,edit:!1});case"DELETE_TASK":var u=t.removedTask,o=e.tasks.filter((function(e){return e.id!==u.id}));return Object(c.a)(Object(c.a)({},e),{},{tasks:o});case"TASK_EDIT_START":var m={action:t};return Object(c.a)(Object(c.a)({},e),{},{task:m,edit:!e.edit});case"COMPLETE_TASK":var d=t.completedTask,b=e.tasks.map((function(e){return e.id===d.id&&(e.done=!e.done,e.finishDate=e.done?(new Date).toISOString().slice(0,10):null),e}));return Object(c.a)(Object(c.a)({},e),{},{tasks:b});case"SET_ERROR":var f=t.error;return Object(c.a)(Object(c.a)({},e),{},{error:f});case"LOADING":return Object(c.a)(Object(c.a)({},e),{},{loading:!1});case"SEARCH_INPUT":var h=t.payload;return Object(c.a)(Object(c.a)({},e),{},{searchQuery:h});default:return e}};var S=function(e){var t=e.search;return r.a.createElement("div",{className:"form-group mt-4"},r.a.createElement("input",{type:"text",placeholder:"search task",className:"form-control",onInput:t}))};var w=function(){var e=Object(n.useReducer)(y,void 0,y),t=Object(l.a)(e,2),a=t[0],i=t[1];Object(n.useEffect)((function(){O.getAllTasks().then((function(e){return i(function(e){return{type:"SET_TASKS",tasks:e}}(e))})).catch((function(e){return i(function(e){return{type:"SET_ERROR",error:e}}(e))})).finally((function(){return i({type:"LOADING"})})),O.getTasksByFullTextSearch(a.searchQuery).then((function(){i({type:"SEARCH_TASK"})}))}),[a.searchQuery]);var s=function(e){i({type:"TASK_EDIT_START",task:e})},o=a.tasks,d=a.edit,f=a.error,h=a.loading;return r.a.createElement(r.a.Fragment,null,d?r.a.createElement(b,{task:a.task.action.task,update:function(e){var t=Object(c.a)(Object(c.a)({},a.task),e);O.replaceTask(t).then((function(e){return i(function(e){return{type:"REPLACE_TASK",replacedTask:e}}(e))}))},edit:s}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"jumbotron bg-dark text-white col-{-sm|-md|-lg|-xl}"},r.a.createElement(u,{addTask:function(e){try{O.addTask(e).then((function(e){return i(function(e){return{type:"ADD_TASK",task:e}}(e))}))}catch(f){console.log("Jest b\u0142\u0105d przy tworzeniu taska:",f)}}}),r.a.createElement(S,{search:function(e){return i(function(e){return{type:"SEARCH_INPUT",payload:e.target.value.toLowerCase()}}(e))}})),f?"Nie uda\u0142o si\u0119 za\u0142adowa\u0107 :(":null,h?"taski si\u0119 \u0142aduj\u0105...":null,r.a.createElement(m,{loading:h,tasks:o,del:function(e){O.removeTask(e).then((function(){return i({type:"DELETE_TASK",removedTask:e})}))},done:function(e){O.finishTask(e).then((function(){return i({type:"COMPLETE_TASK",completedTask:e})}))},edit:s})))};var x=function(e){var t=e.children;if(t.length<1)throw new Error("Header has to have at least one child!");return r.a.createElement("header",{className:"card bg-warning text-white"},t)},N=a(56),A=a.n(N),D=a(113);var C=function(e){var t,a=e.onLogout,c=Object(n.useContext)(D.a).accessToken;return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"card-title text-center"},"TASKS LIST"),r.a.createElement("p",{className:"card-text text-right"},"Witaj ",(t=c,A.a.decode(t).email)," /",r.a.createElement("a",{href:"#",className:"",onClick:a},"wyloguj si\u0119")))):null)};t.default=function(e){var t=e.onLogout;return r.a.createElement(r.a.Fragment,null,r.a.createElement(x,null,r.a.createElement(C,{onLogout:t})),r.a.createElement(w,null))}}}]);
//# sourceMappingURL=4.17bcc6b5.chunk.js.map