(this["webpackJsonpcra-tasks"]=this["webpackJsonpcra-tasks"]||[]).push([[4],{268:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(243),l=a(265),o=a(248),u=a(251),i=a(252),s=function(e){var t={};return e.name?e.name.length<3&&(t.name="Must have min 3 characters"):t.name="Required",t},m=function(e){var t=e.addTask,a=e.onCancel,n=(new Date).toISOString().slice(0,10),c=Object(i.a)({initialValues:{name:"",priority:!1,date:n,done:!1,finishDate:null},validate:s,onSubmit:function(e,a){var n=a.resetForm;t(e),n()}});return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:c.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{id:"name",name:"name",type:"text",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.name,className:"form-control",placeholder:"add task"}),c.errors.name?r.a.createElement("div",{className:"alert alert-danger"},c.errors.name):null),r.a.createElement("div",{className:"form-group form-check"},r.a.createElement("input",{id:"priority",name:"priority",type:"checkbox",onChange:c.handleChange,onBlur:c.handleBlur,value:c.values.priority,className:"form-check-input"}),r.a.createElement("label",{className:"form-check-label",htmlFor:"priority"},"priorytet")),r.a.createElement("button",{className:"btn btn-block btn-outline-warning",type:"submit"},"Dodaj"),r.a.createElement("button",{className:"btn btn-block btn-outline-danger",onClick:a},"Anuluj")))};var d=function(e){var t=e.index,a=e.task,n=e.onDone,c=e.onEdit,l=e.onDelete,i=a.name,s=a.done,m=a.finishDate,d=a.priority,b=a.date,f=s,E={};return s&&(E.textDecoration="line-through",E.backgroundColor="orange"),d&&(E.color="red"),r.a.createElement("tr",{style:E},r.a.createElement("td",null,t+1),r.a.createElement("td",{onClick:n},i),r.a.createElement("td",null,s?m:b),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-sm btn-outline-secondary mr-1",onClick:c,disabled:f},r.a.createElement(o.a,{icon:u.a})),r.a.createElement("button",{className:"btn btn-sm btn-outline-danger",onClick:l},r.a.createElement(o.a,{icon:u.c}))))};var b=function(e){var t=e.tasks,a=e.del,n=e.done,c=e.edit;return r.a.createElement("table",{className:"table table-info table-hover table-striped table-responsive{-sm|-md|-lg|-xl}"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"task name"),r.a.createElement("th",null,"date"),r.a.createElement("th",null,"edit / del"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement(d,{key:e.id,index:t,task:e,onDelete:function(){return a(e)},onDone:function(){return n(e)},onEdit:function(){return c(e)}})}))))},f=function(e){var t={};return e.name?e.name.length<3&&(t.name="Must have min 3 characters"):t.name="Required",t},E=function(e){var t=e.update,a=e.edit,n=e.task,l=n.name,o=Object(i.a)({initialValues:{name:l},validate:f,onSubmit:function(e){var a=e.name;t(Object(c.a)(Object(c.a)({},n),{},{name:a}))}});return r.a.createElement("div",{className:"jumbotron bg-dark text-white"},r.a.createElement("form",{onSubmit:o.handleSubmit},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{id:"name",name:"name",type:"text",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.name,className:"form-control"}),o.errors.name?r.a.createElement("div",{className:"alert alert-danger"},o.errors.name):null),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-block btn-outline-warning",type:"submit"},"Edytuj")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-block btn-outline-danger",onClick:a},"cancel"))))},h=a(54),p=a.n(h),k=a(114),v=a(269),O=a(115),j=[{id:1,date:"2020-02-03",done:!1,finishDate:null,name:"nauczy\u0107 si\u0119 js es 6",priority:!1},{id:2,date:"2020-02-04",done:!1,finishDate:null,name:"nauczy\u0107 si\u0119 biblioteki axios",priority:!0},{id:3,date:"2020-03-03",done:!1,finishDate:null,name:"zainstalowa\u0107 linuxa",priority:!1},{id:4,date:"2020-04-09",done:!1,finishDate:null,name:"zrobi\u0107 api w laravelu",priority:!1}];function T(e){var t=j.findIndex((function(t){return t.id===e}));if(t<0)throw new Error("task o podanym id nie istnieje");return t}var g={getAllTasks:function(){return Object(k.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)(200);case 2:return e.abrupt("return",[].concat(j));case 3:case"end":return e.stop()}}),e)})))()},addTask:function(e){return Object(k.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)(200);case 2:return a=Object(c.a)({id:Object(v.a)()},e),j.push(a),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})))()},replaceTask:function(e){return Object(k.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)(200);case 2:if(e.id){t.next=4;break}throw new Error("task has to have an id to be updated");case 4:return a=T(e.id),n=Object(c.a)({},e),j[a]=n,t.abrupt("return",n);case 8:case"end":return t.stop()}}),t)})))()},finishTask:function(e){return Object(k.a)(p.a.mark((function t(){var a,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)(200);case 2:if(e.id){t.next=4;break}throw new Error("task has to have an id to be finished");case 4:return a=Object(c.a)(Object(c.a)({},e),{},{done:!e.done,finishDate:e.done?(new Date).toISOString().slice(0,10):null}),n=T(e.id),j[n]=a,t.abrupt("return",a);case 8:case"end":return t.stop()}}),t)})))()},removeTask:function(e){return Object(k.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)(200);case 2:if(e.id){t.next=4;break}throw new Error("task has to have an id to be deleted");case 4:a=T(e.id),j.splice(a,1);case 6:case"end":return t.stop()}}),t)})))()},getTasksByFullTextSearch:function(e){return Object(k.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(O.a)(200);case 2:return t.abrupt("return",e);case 3:case"end":return t.stop()}}),t)})))()}},y=a(266),S={tasks:[],searchQuery:"",edit:!1,loading:!0,error:null,currentTaskId:null,create:!1},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_TASKS":var a=t.tasks;return Object(c.a)(Object(c.a)({},e),{},{tasks:a});case"SEARCH_TASK":var n=e.tasks.filter((function(t){return t.name.toLowerCase().includes(e.searchQuery)}));return Object(c.a)(Object(c.a)({},e),{},{tasks:n});case"ADD_TASK":var r=t.task,l=[].concat(Object(y.a)(e.tasks),[r]);return Object(c.a)(Object(c.a)({},e),{},{tasks:l,create:!1});case"REPLACE_TASK":var o=t.replacedTask,u=e.tasks.map((function(e){return e.id===o.id?o:e}));return Object(c.a)(Object(c.a)({},e),{},{tasks:u,edit:!1});case"DELETE_TASK":var i=t.removedTask,s=e.tasks.filter((function(e){return e.id!==i.id}));return Object(c.a)(Object(c.a)({},e),{},{tasks:s});case"TASK_EDIT_START":var m={action:t};return Object(c.a)(Object(c.a)({},e),{},{task:m,edit:!e.edit});case"COMPLETE_TASK":var d=t.completedTask,b=e.tasks.map((function(e){return e.id===d.id&&(e.done=!e.done,e.finishDate=e.done?(new Date).toISOString().slice(0,10):null),e}));return Object(c.a)(Object(c.a)({},e),{},{tasks:b});case"SET_ERROR":var f=t.error;return Object(c.a)(Object(c.a)({},e),{},{error:f});case"LOADING":return Object(c.a)(Object(c.a)({},e),{},{loading:!1});case"SEARCH_INPUT":var E=t.payload;return Object(c.a)(Object(c.a)({},e),{},{searchQuery:E});case"CREATE_MODE":return Object(c.a)(Object(c.a)({},e),{},{create:!0});case"CANCEL_CREATE":return Object(c.a)(Object(c.a)({},e),{},{create:!1});default:return e}};var x=function(e){var t=e.search;return r.a.createElement("div",{className:"form-group mt-4"},r.a.createElement("input",{type:"text",placeholder:"search task",className:"form-control",onInput:t}))};var A=function(){var e=Object(n.useReducer)(w,void 0,w),t=Object(l.a)(e,2),a=t[0],i=t[1];Object(n.useEffect)((function(){g.getAllTasks().then((function(e){return i(function(e){return{type:"SET_TASKS",tasks:e}}(e))})).catch((function(e){return i(function(e){return{type:"SET_ERROR",error:e}}(e))})).finally((function(){return i({type:"LOADING"})})),g.getTasksByFullTextSearch(a.searchQuery).then((function(){i({type:"SEARCH_TASK"})}))}),[a.searchQuery]);var s=function(e){i({type:"TASK_EDIT_START",task:e})},d=a.tasks,f=a.edit,h=a.error,p=a.loading,k=a.create;return r.a.createElement(r.a.Fragment,null,f?r.a.createElement(E,{task:a.task.action.task,update:function(e){var t=Object(c.a)(Object(c.a)({},a.task),e);g.replaceTask(t).then((function(e){return i(function(e){return{type:"REPLACE_TASK",replacedTask:e}}(e))}))},edit:s}):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card bg-dark text-white col-{-sm|-md|-lg|-xl}"},r.a.createElement("div",{className:"card-body"},k?r.a.createElement(m,{addTask:function(e){try{g.addTask(e).then((function(e){return i(function(e){return{type:"ADD_TASK",task:e}}(e))}))}catch(h){console.log("Jest b\u0142\u0105d przy tworzeniu taska:",h)}},onCancel:function(){return i({type:"CANCEL_CREATE"})}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{search:function(e){return i(function(e){return{type:"SEARCH_INPUT",payload:e.target.value.toLowerCase()}}(e))}}),r.a.createElement("button",{onClick:function(){return i({type:"CREATE_MODE"})},className:"btn btn-outline-warning"},r.a.createElement(o.a,{icon:u.b}))))),h?"Nie uda\u0142o si\u0119 za\u0142adowa\u0107 :(":null,p?"taski si\u0119 \u0142aduj\u0105...":null,r.a.createElement(b,{loading:p,tasks:d,del:function(e){g.removeTask(e).then((function(){return i({type:"DELETE_TASK",removedTask:e})}))},done:function(e){g.finishTask(e).then((function(){return i({type:"COMPLETE_TASK",completedTask:e})}))},edit:s})))};var N=function(e){var t=e.children;if(t.length<1)throw new Error("Header has to have at least one child!");return r.a.createElement("header",{className:"card bg-warning text-white"},t)},C=a(56),D=a.n(C),_=a(113);var R=function(e){var t,a=e.onLogout,c=Object(n.useContext)(_.a).accessToken;return r.a.createElement(r.a.Fragment,null,c?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-body"},r.a.createElement("h3",{className:"card-title text-center"},"TASKS LIST"),r.a.createElement("p",{className:"card-text text-right"},"Witaj ",(t=c,D.a.decode(t).email)," /",r.a.createElement("a",{href:"#",className:"",onClick:a},"wyloguj si\u0119")))):null)};t.default=function(e){var t=e.onLogout;return r.a.createElement(r.a.Fragment,null,r.a.createElement(N,null,r.a.createElement(R,{onLogout:t})),r.a.createElement(A,null))}}}]);
//# sourceMappingURL=4.3248e3c2.chunk.js.map