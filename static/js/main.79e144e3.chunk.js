(this["webpackJsonpcra-tasks"]=this["webpackJsonpcra-tasks"]||[]).push([[0],{113:function(e,t,n){"use strict";var a=n(2),r=n.n(a).a.createContext({accessToken:null});t.a=r},115:function(e,t,n){"use strict";function a(e){return new Promise((function(t){setTimeout(t,e)}))}n.d(t,"a",(function(){return a}))},117:function(e,t,n){e.exports=n(241)},125:function(e,t){},127:function(e,t){},141:function(e,t){},143:function(e,t){},171:function(e,t){},173:function(e,t){},174:function(e,t){},180:function(e,t){},182:function(e,t){},200:function(e,t){},203:function(e,t){},219:function(e,t){},222:function(e,t){},241:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(116),c=n.n(o),s=n(17),i=n(18),l=n(20),u=n(19),m=n(56),p=n.n(m),d=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(i.a)(n,[{key:"componentDidCatch",value:function(e,t){console.log("Wyst\u0105pi\u0142 nast\u0119puj\u0105cy b\u0142\u0105d:",e,t)}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.children;return this.state.hasError?t:n}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(r.a.Component),f=n(113),h=n(54),v=n.n(h),g=n(114),k=n(115),b={login:function(e){return Object(g.a)(v.a.mark((function t(){var n,a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.a)(200);case 2:if(n=e.email,a=e.password,"hubert@example.com"!==n||"secret"!==a){t.next=5;break}return t.abrupt("return",{accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJlbWFpbCI6ImJvYkBleGFtcGxlLmNvbSIsImlhdCI6MTU4OTg3OTkxNywiZXhwIjoxNTg5ODgzNTE3LCJzdWIiOiIyIn0.BRhgk1nXn4eDRrwei_No0EVom6uv8feCTOYLGOl-j1E"});case 5:throw new Error("invalid credentials");case 6:case"end":return t.stop()}}),t)})))()}},I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleSubmit=function(e){e.preventDefault(),a.props.onLoginAttempt({email:a.emailInput.current.value,password:a.passwordInput.current.value}),a.emailInput.current.value="",a.passwordInput.current.value=""},a.emailInput=r.a.createRef(),a.passwordInput=r.a.createRef(),a}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"jumbotron bg-dark text-white"},r.a.createElement("form",{onSubmit:this.handleSubmit},this.props.errorMessage?r.a.createElement("div",{className:"alert alert-danger"},this.props.errorMessage):null,r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"email",className:"col-form-label text-md-right col-md-2"},"Email:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{ref:this.emailInput,type:"text",defaultValue:"hubert@example.com",className:"form-control"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("label",{htmlFor:"password",className:"col-form-label text-md-right col-md-2"},"Has\u0142o:"),r.a.createElement("div",{className:"col-md-8"},r.a.createElement("input",{ref:this.passwordInput,type:"password",defaultValue:"secret",className:"form-control"}))),r.a.createElement("div",{className:"form-group row"},r.a.createElement("div",{className:"col-md-8 offset-md-2"},r.a.createElement("button",{className:"btn btn-block btn-outline-warning"},"Zaloguj si\u0119")))))}}]),n}(r.a.Component),w=r.a.lazy((function(){return Promise.all([n.e(3),n.e(4)]).then(n.bind(null,262))})),E=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={accessToken:null,previousLoginAttemptFailed:!1,expiresIn:36e5},e.handleLoginAttempt=function(t){b.login(t).then((function(t){var n=t.accessToken;localStorage.setItem("accessToken",n),e.getAccessToken()})).catch((function(){e.setState({accessToken:null,previousLoginAttemptFailed:!0})}))},e.handleLogout=function(){e.setState({accessToken:localStorage.removeItem("accessToken"),previousLoginAttemptFailed:!1})},e}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getAccessToken(),this.intID=setInterval((function(){e.handleLogout()}),this.state.expiresIn)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intID)}},{key:"getAccessToken",value:function(){this.setState({accessToken:localStorage.getItem("accessToken"),previousLoginAttemptFailed:!1})}},{key:"getUserExpires",value:function(e){return p.a.decode(e)}},{key:"isUserLoggedIn",value:function(){return!!this.state.accessToken}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(d,{message:"Co\u015b nie dzia\u0142a w ca\u0142ej aplikacji"},this.isUserLoggedIn()?r.a.createElement(f.a.Provider,{value:{accessToken:this.state.accessToken}},r.a.createElement(r.a.Suspense,{fallback:"... Loading"},r.a.createElement(w,{onLogout:this.handleLogout}))):r.a.createElement(I,{errorMessage:this.state.previousLoginAttemptFailed?"Nie uda\u0142o si\u0119 zalogowa\u0107":null,onLoginAttempt:this.handleLoginAttempt})))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(240);c.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[117,1,2]]]);
//# sourceMappingURL=main.79e144e3.chunk.js.map